name: Update AtomicDEX API Methods Table

on:
  push:
    branches: [ "dev" ]
    paths:
      - 'src/pages/atomicdex/api/**.mdx'
      - '!src/pages/atomicdex/api/index.mdx'

jobs:
  update_configs:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Generate configs
        shell: bash
        run:  ${GITHUB_WORKSPACE}/utils/gen_api_methods_table.py

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          commit-message: update atomicdex methods table
          committer: GitHub <noreply@github.com>
          author: ${{ github.actor }} <${{ github.actor }}@users.noreply.github.com>
          branch: methods-table-update
          delete-branch: true
          title: '[BOT] Update AtomicDEX API Methods Table'
          body: |
            - AtomicDEX API Methods Table auto-generated on merge to dev
          labels: |
            autogenerated
          reviewers: smk762, gcharang, endrilickollari
          draft: false