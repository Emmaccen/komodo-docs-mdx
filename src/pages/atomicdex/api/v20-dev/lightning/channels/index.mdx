# Lightning Network Channels

<Note>
Lightning methods are currently only available using the native AtomicDEX-API. WASM support should be available in late 2023.
</Note>


## open_channel

The `lightning::channels::open_channel` method opens a new channel with a remote node.

### Request Parameters

| Parameter         | Type    | Description                                                                              |
|-------------------|---------|------------------------------------------------------------------------------------------|
| coin              | string  | The ticker of the coin you would like to view open channels for.                         |
| node_address      | object  | A standard `LightningOpenChannelsFilter` object.                                         |
| amount            | object  | A standard [LightningChannelAmount](/atomicdex/api/v20#LightningChannelAmount) object.   |
| push_msat         | integer | Optional. SOMETHING SOMETHING in millisatoshis.                                          |
| channel_options   | object  | Optional. A standard [LightningChannelOptions](/atomicdex/api/v20#LightningChannelOptions) object. |
| channel_configs   | object  | Optional. A standard [LightningChannelConfig](/atomicdex/api/v20#LightningChannelConfig) object.   |
| limit             | integer | Optional, defaults to `10`. Maximum number of results to return.                         |


#### ðŸ“Œ Example using an exact amount

<CodeGroup title="" tag="POST" label="METHOD_NAME">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "$userpass",
    "mmrpc": "2.0",
    "method": "lightning::channels::open_channel",
    "params": {
        "coin": "tBTC-TEST-lightning",
        "node_address": "038863cf8ab91046230f561cd5b386cbff8309fa02e3f0c3ed161a3aeb64a643b9@203.132.94.196:9735",
        "amount": {
            "type": "Exact",
            "value": 0.004
        }
    }
    "id": null
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>


#### ðŸ“Œ Example with all available configuration options

<CodeGroup title="" tag="POST" label="METHOD_NAME">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "$userpass",
    "mmrpc": "2.0",
    "method": "lightning::channels::open_channel",
    "params": {
        "coin": "tBTC-TEST-lightning",
        "node_address": "038863cf8ab91046230f561cd5b386cbff8309fa02e3f0c3ed161a3aeb64a643b9@203.132.94.196:9735",
        "amount": {
            "type": "Max"
        }
        "push_msat": 0,
        "channel_options": {
            "proportional_fee_in_millionths_sats": 0,
            "base_fee_msat": 1000,
            "cltv_expiry_delta": 72,
            "max_dust_htlc_exposure_msat": 5000000,
            "force_close_avoidance_max_fee_satoshis": 1000
        },
        "channel_configs" : {
            "counterparty_locktime": 144,
            "our_htlc_minimum_msat": 1,
            "negotiate_scid_privacy": false,
            "max_inbound_in_flight_htlc_percent": 10,
            "announced_channel": false,
            "commit_upfront_shutdown_pubkey": true
        }
    }
    "id": null
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>


## lightning::channels::close_channel

The `lightning::channels::close_channel` method closes a channel with a remote node.

### Request Parameters

| Parameter         | Type    | Description                                                                              |
|-------------------|---------|------------------------------------------------------------------------------------------|
| coin              | string  | The ticker of the coin you would like to view closed channels for.                       |
| rpc_channel_id    | integer | Then channel ID number.                                                                  |
| force_close       | boolean | If `true`, will force closure of the channel.                                            |


#### ðŸ“Œ Example to force closing a channel

<CodeGroup title="" tag="POST" label="close_channel">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "$userpass",
    "mmrpc": "2.0",
    "method": "lightning::channels::close_channel",
    "params": {
        "coin": "tBTC-TEST-lightning",
        "rpc_channel_id": 1,
        "force_close": false
    },
    "id": 8
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>


## update_channel

The `lightning::channels::update_channel` method updates channel options.

### Request Parameters

| Parameter         | Type    | Description                                                                              |
|-------------------|---------|------------------------------------------------------------------------------------------|
| coin              | string  | The ticker of the coin you would like to view closed channels for.                       |
| rpc_channel_id    | integer | Then channel ID number.                                                                  |
| channel_options   | object  | A standard [LightningChannelOptions](/atomicdex/api/v20#LightningChannelOptions) object. |


#### ðŸ“Œ Example to update all available channel options

<CodeGroup title="" tag="POST" label="update_channel">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "$userpass",
    "mmrpc": "2.0",
    "method": "lightning::channels::update_channel",
    "params": {
        "coin": "tBTC-TEST-lightning",
        "rpc_channel_id": 1,
        "channel_options": {
            "proportional_fee_in_millionths_sats": 0,
            "base_fee_msat": 1000,
            "cltv_expiry_delta": 72,
            "max_dust_htlc_exposure_msat": 5000000,
            "force_close_avoidance_max_fee_satoshis": 1000
        }
    }
    "id": 2
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>


## get_channel_details

The `lightning::channels::get_channel_details` method returns details about a channel.

### Request Parameters

| Parameter         | Type    | Description                                                                              |
|-------------------|---------|------------------------------------------------------------------------------------------|
| coin              | string  | The ticker of the coin you would like to view closed channels for.                       |
| rpc_channel_id    | integer | Then channel ID number.                                         |


#### ðŸ“Œ Example to update all available channel options

<CodeGroup title="" tag="POST" label="get_channel_details">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "$userpass",
    "mmrpc": "2.0",
    "method": "lightning::channels::get_channel_details",
    "params": {
        "coin": "tBTC-TEST-lightning",
        "rpc_channel_id": 1
    },
    "id": 54
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>


## get_claimable_balances

The `lightning::channels::get_claimable_balances` method returns a list of claimable balances for a coin.

### Request Parameters

| Parameter                       | Type    | Description                                                                              |
|---------------------------------|---------|------------------------------------------------------------------------------------------|
| coin                            | string  | The ticker of the coin you would like to view closed channels for.                       |
| include_open_channels_balances  | integer | Optional, defaults to `SOMETHING`. If `true`, includes balances from open channels.      |


#### ðŸ“Œ Example to update all available channel options

<CodeGroup title="" tag="POST" label="get_claimable_balances">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "$userpass",
    "mmrpc": "2.0",
    "method": "lightning::channels::get_claimable_balances",
    "params": {
        "coin": "tBTC-TEST-lightning",
        "include_open_channels_balances": false
    },
    "id": 762
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>


## list_open_channels_by_filter

The `lightning::channels::list_open_channels_by_filter` method returns a list of open channels filtered by the provided filter object.

### Request Parameters

| Parameter         | Type    | Description                                                              |
|-------------------|---------|--------------------------------------------------------------------------|
| coin              | string  | The ticker of the coin you would like to view closed channels for.       |
| filter            | object  | A standard [LightningOpenChannelsFilter](/atomicdex/api/v20#LightningOpenChannelsFilter) object.                         |
| paging_options    | object  | Optional. A standard [Pagination](/atomicdex/api/v20#Pagination) object. |
| limit             | integer | Optional, defaults to `10`. Maximum number of results to return.         |


#### ðŸ“Œ Example without using `filter` parameter

#### Command

<CodeGroup title="" tag="POST" label="list_open_channels_by_filter">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "$userpass",
    "mmrpc": "2.0",
    "method": "lightning::channels::list_open_channels_by_filter",
    "params": {
        "coin": "tBTC-TEST-lightning"
    },
    "id": 55
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>


#### ðŸ“Œ Example with `filter` for inbound channels only

#### Command

<CodeGroup title="" tag="POST" label="list_open_channels_by_filter">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "$userpass",
    "mmrpc": "2.0",
    "method": "lightning::channels::list_open_channels_by_filter",
    "params": {
        "coin": "tBTC-TEST-lightning"
        "filter": {
            "is_outbound": false
        }
    },
    "id": 55
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>


#### ðŸ“Œ Example with `filter` for a specific `node_id`

#### Command

<CodeGroup title="" tag="POST" label="list_open_channels_by_filter">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "$userpass",
    "mmrpc": "2.0",
    "method": "lightning::channels::list_open_channels_by_filter",
    "params": {
        "coin": "tBTC-TEST-lightning"
        "filter": {
            "counterparty_node_id": "02eb0b178576857b6990ba57d56aa08f651a05a8098496004f42df5e7440b0a9c1"
        }
    },
    "id": 55
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>


#### ðŸ“Œ Example with `filter` for a mode with between 100000 and 500000 satoshi funding value

#### Command

<CodeGroup title="" tag="POST" label="list_open_channels_by_filter">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "$userpass",
    "mmrpc": "2.0",
    "method": "lightning::channels::list_open_channels_by_filter",
    "params": {
        "coin": "tBTC-TEST-lightning"
        "filter": {
            "from_funding_value_sats": 100000,
            "to_funding_value_sats": 500000
        }
    },
    "id": 55
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>


## lightning::channels::list_closed_channels_by_filter

### Request Parameters

| Parameter         | Type    | Description                                                              |
|-------------------|---------|--------------------------------------------------------------------------|
| coin              | string  | The ticker of the coin you would like to view closed channels for.       |
| filter            | object  | A standard [LightningClosedChannelsFilter](/atomicdex/api/v20#LightningClosedChannelsFilter) object.                         |
| paging_options    | object  | Optional. A standard [Pagination](/atomicdex/api/v20#Pagination) object. |
| limit             | integer | Optional, defaults to `10`. Maximum number of results to return.         |



#### ðŸ“Œ Example without using `filter` parameter

#### Command

<CodeGroup title="" tag="POST" label="list_closed_channels_by_filter">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "$userpass",
    "mmrpc": "2.0",
    "method": "lightning::channels::list_closed_channels_by_filter",
    "params": {
        "coin": "tBTC-TEST-lightning"
    },
    "id": 55
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>


#### ðŸ“Œ Example with `filter` for inbound channels only

#### Command

<CodeGroup title="" tag="POST" label="list_closed_channels_by_filter">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "$userpass",
    "mmrpc": "2.0",
    "method": "lightning::channels::list_closed_channels_by_filter",
    "params": {
        "coin": "tBTC-TEST-lightning"
        "filter": {
            "channel_type": "Inbound"
        }
    },
    "id": 55
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>


#### ðŸ“Œ Example with `filter` for a specific `node_id`

#### Command

<CodeGroup title="" tag="POST" label="list_closed_channels_by_filter">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "$userpass",
    "mmrpc": "2.0",
    "method": "lightning::channels::list_closed_channels_by_filter",
    "params": {
        "coin": "tBTC-TEST-lightning"
        "filter": {
            "counterparty_node_id": "02eb0b178576857b6990ba57d56aa08f651a05a8098496004f42df5e7440b0a9c1"
        }
    },
    "id": 55
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>


#### ðŸ“Œ Example with `filter` for a mode with between 100000 and 500000 satoshi funding value

#### Command

<CodeGroup title="" tag="POST" label="list_closed_channels_by_filter">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "$userpass",
    "mmrpc": "2.0",
    "method": "lightning::channels::list_closed_channels_by_filter",
    "params": {
        "coin": "tBTC-TEST-lightning"
        "filter": {
            "from_funding_value_sats": 100000,
            "to_funding_value_sats": 500000
        }
    },
    "id": 55
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>
