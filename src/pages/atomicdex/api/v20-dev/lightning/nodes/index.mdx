# Lightning Network Nodes

<Note>
Lightning methods are currently only available using the native AtomicDEX-API. WASM support should be available in late 2023.
</Note>


## connect_to_node

The `lightning::nodes::connect_to_node` method allows you to connect to a lightning node.

### Request Parameters

| Parameter            | Type    | Description            |
|----------------------|---------|------------------------|
| coin                 | string  | A coin ticker          |
| node_address         | string  | Lightning nodes addresses always have a format of `pubkey`@`ip_address`:`port` |


#### ðŸ“Œ Example

<CodeGroup title="" tag="POST" label="lightning::nodes::connect_to_node">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "MM2_RPC_PASSWORD",
    "mmrpc": "2.0",
    "method": "lightning::nodes::connect_to_node",
    "params": {
        "coin": "tBTC-TEST-lightning",
        "node_address": "038863cf8ab91046230f561cd5b386cbff8309fa02e3f0c3ed161a3aeb64a643b9@203.132.94.196:9735"
    },
    "id": 1
}
```
</CodeGroup>

<Note>
The node address in the above request is for the WalletOfSatoshi lightning node, which is one of the most connected lightning nodes.
Other node addresses can be retrieved from any lightning explorer, such as:
- https://1ml.com/
- https://mempool.space/lightning/
</Note>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response (success)

```json
{
    "mmrpc": "2.0",
    "result": "Connected successfully to node : 035e4ff418fc8b5554c5d9eea66396c227bd429a3251c8cbc711002ba215bfc226@170.75.163.209:9735",
    "id": null
}
```

#### Response (already connected)

```json
{
    "mmrpc": "2.0",
    "result": "Connected successfully to node : 035e4ff418fc8b5554c5d9eea66396c227bd429a3251c8cbc711002ba215bfc226@170.75.163.209:9735",
    "id": null
}
```
</CollapsibleSection>


## list_trusted_nodes

The `lightning::nodes::list_trusted_nodes` method allows you to list all nodes in your trusted list.


### Request Parameters

| Parameter            | Type    | Description            |
|----------------------|---------|------------------------|
| coin                 | string  | A coin ticker          |


#### ðŸ“Œ Example

<CodeGroup title="" tag="POST" label="lightning::nodes::list_trusted_nodes">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "MM2_RPC_PASSWORD",
    "mmrpc": "2.0",
    "method": "lightning::nodes::list_trusted_nodes",
    "params": {
        "coin": "tBTC-TEST-lightning"
    },
    "id": 1
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>


## remove_trusted_node

The `lightning::nodes::remove_trusted_node` method allows you to remove a node from your trusted list.


### Request Parameters

| Parameter            | Type    | Description                                               |
|----------------------|---------|-----------------------------------------------------------|
| coin                 | string  | A coin ticker.                                            |
| node_id              | string  | ID of node you would like to remove to your trusted list. |


#### ðŸ“Œ Example

<CodeGroup title="" tag="POST" label="lightning::nodes::remove_trusted_node">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "MM2_RPC_PASSWORD",
    "mmrpc": "2.0",
    "method": "lightning::nodes::remove_trusted_node",
    "params": {
        "coin": "tBTC-TEST-lightning",
        "node_id": "038863cf8ab91046230f561cd5b386cbff8309fa02e3f0c3ed161a3aeb64a643b9"
    },
    "id": 1
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>


## add_trusted_node

The `lightning::nodes::add_trusted_node` method allows you to add a node to your trusted list.


### Request Parameters

| Parameter            | Type    | Description                                               |
|----------------------|---------|-----------------------------------------------------------|
| coin                 | string  | A coin ticker.                                            |
| node_id              | string  | ID of node you would like to add to your trusted list.    |


#### ðŸ“Œ Example

<CodeGroup title="" tag="POST" label="lightning::nodes::add_trusted_node">
```json {{ mm2MethodDecorate : true }}
{
    "userpass": "MM2_RPC_PASSWORD",
    "mmrpc": "2.0",
    "method": "lightning::nodes::add_trusted_node",
    "params": {
        "coin": "tBTC-TEST-lightning",
        "node_id": "038863cf8ab91046230f561cd5b386cbff8309fa02e3f0c3ed161a3aeb64a643b9"
    },
    "id": 1
}
```
</CodeGroup>


<CollapsibleSection expandedText='Hide Response' collapsedText='Show Response'>

#### Response

```json

```
</CollapsibleSection>















### Errors
```json
{
    "mmrpc": "2.0",
    "error": "Error connecting to node: Timeout error: Failed to connect to node: 035e4ff418fc8b5554c5d9eea66396c227bd429a3251c8cbc711002ba215bfc226",
    "error_path": "connect_to_node",
    "error_trace": "connect_to_node:78]",
    "error_type": "ConnectionError",
    "error_data": "Timeout error: Failed to connect to node: 035e4ff418fc8b5554c5d9eea66396c227bd429a3251c8cbc711002ba215bfc226",
    "id": null
}
```